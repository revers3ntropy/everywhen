<VirtualHost 77.72.5.9:443>
    Protocols h2 http/1.1
    ServerName everywhen.me

    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>

    ProxyPass /err/ !

    ProxyPass / https://localhost:18897/
    ProxyPassReverse / https://localhost:18897/

    Alias /err/ /home/everywhen/public_html/
    ErrorDocument 503 /err/503.html

    <Location />
        Order allow,deny
        Allow from all
    </Location>

    SSLEngine on
    SSLProxyEngine on
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
    SSLProxyCheckPeerExpire off
    SSLCertificateFile /home/everywhen/app/cert.pem
    SSLCertificateChainFile /home/everywhen/app/ca.pem
    SSLCertificateKeyFile /home/everywhen/app/key.pem
</VirtualHost>

<VirtualHost 77.72.5.9:443>
    Protocols h2 http/1.1
    ServerName staging.everywhen.me

    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>

    ProxyPass /err/ !
    ProxyPass / https://localhost:18899/
    ProxyPassReverse / https://localhost:18899/

    Alias /err/ /home/everywhen/public_html/
    ErrorDocument 503 /err/503.html

    <Location />
        Order allow,deny
        Allow from all
    </Location>

    SSLEngine on
    SSLProxyEngine on
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
    SSLProxyCheckPeerExpire off
    SSLCertificateFile /home/everywhen/app-staging/cert.pem
    SSLCertificateChainFile /home/everywhen/app-staging/ca.pem
    SSLCertificateKeyFile /home/everywhen/app-staging/key.pem
</VirtualHost>
